<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style>
			html, body {
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;
				overflow: auto;
			}

			body {
				display: flex;
				flex-direction: column;
				color: Black;
				margin: 0 auto;
				font-family: Helvetica;
				font-size: 18px;
			}

			.content {
				flex: 1 0 auto;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}

			h1,h3 {
				color: Red;
				text-align: center;
				margin: .5% auto;
			}

			{% if success==True %}
			h1 {
				margin-top: 2%;
			}
			{% endif %}

			h1 a:link, h1 a:visited, h1 a:active {
				color: Red;
				text-decoration: underline;
			}

			h1 a:hover {
				color: Black;
				text-decoration: underline;
			}

			h2 {
				color: Red;
				width: 90%;
				margin: .5% auto;
			}

			table {
				border-collapse: collapse;
				width: 90%;
				border: 2px solid black;
				margin: 2% auto 3% auto;
			}

			table.center {
				margin-left: auto;
				margin-right: auto;
			}

			thead {
				border-bottom: 2px solid black;
				font-weight: 700;
				font-size: 20px;
			}

			th, td {
				text-align: left;
				padding: 16px;
				border: 1px solid grey;
			}

			tr:nth-child(even) {
				background-color: #f2f2f2;
			}

			form {
				display: table;
				margin: 1% auto;
				align-content: center;
				width: 90%;
			}

			label {
				color: Red;
				font-weight: 500;
				font-size: 20px;
				display: table-row;
				margin-left: 2%;
			}

			input, select {
				display: table-row;
				color: Black;
				margin: .5% auto;
				width: 100%;
			}

			span {
				color: Black;
			}

			a:link, a:visited, a:active {
				color: Black;
				text-decoration: underline;
			}

			a:hover {
				color: Red;
				text-decoration: underline;
			}

			.tnum {
				color: Red;
				font-weight: 700;
				text-transform: uppercase;
				font-size: 18px;
			}

			.submit {
				color: Red;
				font-weight: 700;
				text-transform: uppercase;
				font-size: 24px;
				margin-top: .8%;
			}

			#result {
				overflow-x:auto;
			}

			footer {
				flex-shrink: 0;
				text-align: center;
				background-color: LightGray;
				padding: .8%;
				display: flex;
				flex-flow: row wrap;
			}

			footer p {
				width: 20%;
				margin: .4% auto;
			}

		</style>
	</head>
	<body>
		<div class="content">
			<h1><a href="/">ContenTube</a></h1>
			<h3>The ultimate search engine for videos. No more clickbait!</h3>
			<form method="post" action="{{ url_for('result') }}" id="query_form">
				<label for="input">Query:</label>

				{% if not input %}
					<input type="text" name="input" id="query">
				{% endif %}

				{% if input %}
					<input type="text" name="input" id="query" value="{{input}}">
				{% endif %}
				<br>
				<label for="corpus">Corpus:</label>

				{% if not corpus or corpus == 'c' %}
				<select id="corpus" name="corpus">
					<option value="t">Title</option>
					<option value="d">Description</option>
					<option value="c" selected>Content</option>
				</select>
				{% endif %}

				{% if corpus == 't' %}
				<select id="corpus" name="corpus">
					<option value="t" selected>Title</option>
					<option value="d">Description</option>
					<option value="c">Content</option>
				</select>
				{% endif %}

				{% if corpus == 'd' %}
				<select id="corpus" name="corpus">
					<option value="t">Title</option>
					<option value="d"selected>Description</option>
					<option value="c">Content</option>
				</select>
				{% endif %}
				<br>
				<input type="submit" value="submit" class="submit"/>
			</form>

			{% if success == True %}
			<br>
			{% if corpus == 't' %}
			<h2>Search results for <span>"{{ input }}"</span> (based on <span>video titles</span>):</h2>
			{% endif %}
			{% if corpus == 'd' %}
			<h2>Search results for <span>"{{ input }}"</span> (based on <span>video descriptions</span>):</h2>
			{% endif %}
			{% if not corpus or corpus == 'c' %}
			<h2>Search results for <span>"{{ input }}"</span> (based on <span>video transcripts</span>):</h2>
			{% endif %}
			<table id="result">
				<thead>
					<tr>
						<th></th>
						<th>Title</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					{% for res in results %}
					<tr>
						<td><div class="tnum">{{ loop.index0+1 }}.</div></td>
						<td>{{ res.title }}</td>
						<td>{{ res.description }}</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			{% endif %}

			{% if success == False %}
			<br>
			{% if corpus == 't' %}
			<h2>Error searching for <span>"{{ input }}"</span> (based on video titles).</h2>
			{% endif %}
			{% if corpus == 'd' %}
			<h2>Error searching for <span>"{{ input }}"</span> ( based on video descriptions).</h2>
			{% endif %}
			{% if not corpus or corpus == 'c' %}
			<h2>Error searching for <span>"{{ input }}"</span> (based on video transcripts).</h2>
			{% endif %}
			<br>
			{% endif %}
		</div>
		<footer>
			<p style="text-align: left;">CSCI 182: Web and Data Mining</p>
			<p style="text-align: center;">By <a href="https://github.com/defroni">Dan</a> and <a href="https://github.com/CSN3RD">Jonathan</a></p>
			<p style="text-align: right;">Copyright &copy; 2022 All Rights Reserved</p>
		</footer>
	</body>
</html>